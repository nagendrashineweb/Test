<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height " />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.custom.structure.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.sidr.dark.css" />
    <title>Welcome</title>
    <script type="text/javascript" src="cordova.js"></script>
    <script src="js/lib/require.js"></script>
    <script src="js/config.js"></script>
    <script type="text/javascript">

      require(['jquery', 'my_rating_controller', 'dragend', 'general'], function ($, my_rating_controller, dragend, general) {

        general.showLoader();

        setTimeout(function() { if ($('.spinner-overlay').data('display') == "0") $('.spinner-overlay').show();}, 500);

        var isHome = true;

        var club_stats_c;
        var matchid = 1;
        var query = window.location.search.substring(1);
        var pathArray = query.split("&");
        if (pathArray[0].indexOf('match') > -1) {
            pathArray = pathArray[0].split('=');
            // console.log(pathArray);
            matchid = pathArray[1];
        }

        //Swipe stuff - dragend js

        var prevpage = 0;

        var setPrevPage = function(pp) {
          prevpage = pp;
        }

        var dragendObj;

        $("#swipe-content").dragend({
          jumpToPage: 1,
          onSwipeEnd: function() {
            // console.log(this.page);
            // console.log(prevpage);
            if (this.page == prevpage) {
              console.log("test");
              return;
            }
            $('.content').removeClass('ui-page-active');

            currentPage = this.page;
            if (currentPage == 0) {
              currentPage = this.pages.length - 2;
            }

            if (currentPage == this.pages.length-1) {
              currentPage = 1;
            }

            prevpage = currentPage;

            $cr = $("#swipe-content li").eq(currentPage);
            $cr.find('.content').addClass('ui-page-active');
            
          },
          afterInitialize: function() {
            this.container.style.visibility = "visible";
            $("#swipe-content li:nth-child(1)").find('.content').addClass('ui-page-active');
            prevpage = 0;
            dragendObj = this;
            my_rating_controller.initRating(matchid, dragendObj, setPrevPage);
          }
        });

      });
    </script>
  </head>
  <body class="fav-bg">
    <div class="sm-overlay"></div>
    <div class="header">
      <div class="header-back"><div class="h-arrow-left"></div></div>
    </div>
    <div class="hidden3" style="font-family: Proxima-Nova; font-weight: 700;"></div>
    <!-- <div class="spinner-overlay" style="display:none;" data-display="0">
      <div class="spinner">
        <div class="rect1"></div>
        <div class="rect2"></div>
        <div class="rect3"></div>
        <div class="rect4"></div>
        <div class="rect5"></div>
      </div>
    </div> -->
    <div id="swipe-content">
      <ul>
        <li class="dragend-page">
          <div class="content c-my-rating"  data-prev="my_rating" data-next="my_rating" data-role="page" data-type="myrating" data-dom-cache="true">
            <div class="swipe-bar">
                <div class="sb-text sb-left">
                    <!--Player Ratings-->
                </div><div class="sb-text sb-center">
                    <!-- My Ratings -->
                </div><div class="sb-text sb-right">
                    <!--Lineups-->
                </div>
                <div class="swipe-bar-shadow"></div>
            </div>
            <div class="inner-content" style="display:none;">
                <div class="h-92"></div>
                <div class="match-cont hw-accel">
                </div>
                <div id='my-rating-container' class="player-list mt-15 mrating-swipe hw-accel"></div>
                <div class="info-box-dd hwaccel" style="display: none;">
                    <div class="ib-dd-top">
                        <span class="arrow-up"></span><h4>Substitutes</h4>
                    </div>
                    <div class="ib-dd-content">
                        <div id="my-rating-container-subs"></div>
                    </div>
                </div>
                <div class="info-box-dd last hwaccel" style="display: none;">
                    <div class="ib-dd-top">
                        <span class="arrow-up"></span><h4>Unused Subs</h4>
                    </div>
                    <div class="ib-dd-content">
                        <div id="my-rating-container-unused-subs"></div>
                    </div>
                </div>
                <div id="share-container" style="display: none;"><canvas id="share-canvas" width="300" height="480"></canvas></div>
                <div id="share-buttons" style="display: none;">
                    <a class="medium-button share-button-mr mb-10" href='javascript:void(0)'>Share ratings</a>
                </div>
                <div id="share-buttons2" style="display: none;">
                    <a class="long-button share-button2 mb-10 mt-10" href='javascript:void(0)'>Share</a>
                </div>
                <div class="h-60"></div>
            </div>
          </div>
        </li>
        <li class="dragend-page">
          <div class="content c-my-rating"  data-prev="my_rating" data-next="my_rating" data-role="page" data-type="myrating" data-dom-cache="true">
            <div class="swipe-bar">
              <div class="sb-text sb-left">
                  <!--Player Ratings-->
              </div><div class="sb-text sb-center">
                  <!-- My Ratings -->
              </div><div class="sb-text sb-right">
                  <!--Lineups-->
              </div>
              <div class="swipe-bar-shadow"></div>
            </div>
            <div class="inner-content" style="display:none;">
              <div class="h-92"></div>
              <div class="match-cont hw-accel">
              </div>
              <div id='my-rating-container' class="player-list mt-15 mrating-swipe hw-accel"></div>
              <div class="info-box-dd hwaccel" style="display: none;">
                  <div class="ib-dd-top">
                      <span class="arrow-up"></span><h4>Substitutes</h4>
                  </div>
                  <div class="ib-dd-content">
                      <div id="my-rating-container-subs"></div>
                  </div>
              </div>
              <div class="info-box-dd last hwaccel" style="display: none;">
                  <div class="ib-dd-top">
                      <span class="arrow-up"></span><h4>Unused Subs</h4>
                  </div>
                  <div class="ib-dd-content">
                      <div id="my-rating-container-unused-subs"></div>
                  </div>
              </div>
              <div id="share-container" style="display: none;"><canvas id="share-canvas" width="300" height="480"></canvas></div>
              <div id="share-buttons" style="display: none;">
                  <a class="medium-button share-button-mr mb-10" href='javascript:void(0)'>Share ratings</a>
              </div>
              <div id="share-buttons2" style="display: none;">
                  <a class="long-button share-button2 mb-10 mt-10" href='javascript:void(0)'>Share</a>
              </div>
              <div class="mb-60"></div>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div class="bottom-nav">
      <a class="bn-button active" href="dashboard.html" data-ajax="false">HOME</a><a class="bn-button" href="club_stats.html" data-ajax="false">CLUB</a><a class="bn-button" href="league.html" data-ajax="false">LEAGUE</a><a class="bn-button" href="stats.html" data-ajax="false">STARSTATS</a>
    </div>
  </body>
</html>
