<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height " />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.custom.structure.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.sidr.dark.css" />
    <title>Welcome</title>
    <script type="text/javascript" src="cordova.js"></script>
    <script src="js/lib/require.js"></script>
    <script src="js/config.js"></script>
    <script type="text/javascript">

      require(['jquery', 'my_rating_controller', 'dragend', 'general'], function ($, my_rating_controller, dragend, general) {

        general.showLoader();
        
        setTimeout(function() { if ($('.spinner-overlay').data('display') == "0") $('.spinner-overlay').show();}, 500);

        var isHome = true;

        var club_stats_c;
        var matchid = 1;
        var query = window.location.search.substring(1);
        var pathArray = query.split("&");
        if (pathArray[0].indexOf('match') > -1) {
            pathArray = pathArray[0].split('=');
            // console.log(pathArray);
            matchid = pathArray[1];
        }

        //Swipe stuff - dragend js

        var prevpage = 0;

        var setPrevPage = function(pp) {
          prevpage = pp;
        }

        var dragendObj;

        $("#swipe-content").dragend({
          jumpToPage: 1,
          onSwipeEnd: function() {
            console.log(this.page);
            console.log(prevpage);
            if (this.page == prevpage) {
              console.log("test");
              return;
            }
            $('.content').removeClass('ui-page-active');

            currentPage = this.page;
            if (currentPage == 0) {
              currentPage = this.pages.length - 2;
            }

            if (currentPage == this.pages.length-1) {
              currentPage = 1;
            }

            prevpage = currentPage;

            $cr = $("#swipe-content li").eq(currentPage);
            $cr.find('.content').addClass('ui-page-active');
            
          },
          afterInitialize: function() {
            this.container.style.visibility = "visible";
            $("#swipe-content li:nth-child(1)").find('.content').addClass('ui-page-active');
            prevpage = 0;
            dragendObj = this;
            my_rating_controller.initRating(matchid, dragendObj, setPrevPage);
          }
        });

      });
    </script>
  </head>
  <body style='background-color: #EC1C24;' class="fav-bg">
    <div class="header">
      <!-- <div class="header-back"><div class="h-arrow-left"></div></div> -->
      <h2 class="header-title"><span class="header-title-dash">&mdash;</span> Training Drill 3 <span class="header-title-dash">&mdash;</span></h2>
    </div>
    <div class="under-header"></div>
    <div class="onb-content3">
      <div class="inner-content onb-content" >
        <h1 class="onboard-title">Back of the net !</h1>
        <h2 class="onboard-subtitle">Congratulations - you're off the mark.</br>Scroll down for a breakdown of your ratings.</h2>
        <div class="dash-divider"></div>
        <div class="onboard-stars">
          <div class="onboard-star"></div><div class="onboard-star "></div><div class="onboard-star onboard-star-sel"></div>
        </div>

        <div id="swipe-content" style="width: 100%; height: 422px;">
          <ul>
            <li class="dragend-page">
              <div class="content c-my-rating"  data-prev="my_rating" data-next="my_rating" data-role="page" data-type="myrating" data-dom-cache="true">
                <div class="inner-content" style="display:none;">
                    <div class="match-cont hw-accel" style="margin-top: 0;">
                    </div>
                    <div id='my-rating-container' class="player-list mt-15 mrating-swipe hw-accel"></div>
                    <div class="info-box-dd hwaccel" style="display: none;">
                        <div class="ib-dd-top">
                            <span class="arrow-up"></span><h4>Substitutes</h4>
                        </div>
                        <div class="ib-dd-content">
                            <div id="my-rating-container-subs"></div>
                        </div>
                    </div>
                    <div class="info-box-dd last hwaccel" style="display: none;">
                        <div class="ib-dd-top">
                            <span class="arrow-up"></span><h4>Unused Subs</h4>
                        </div>
                        <div class="ib-dd-content">
                            <div id="my-rating-container-unused-subs"></div>
                        </div>
                    </div>
                    <div id="share-container" style="display: none;"><canvas id="share-canvas" width="300" height="480"></canvas></div>
                    <div id="share-buttons" style="display: none;">
                        <a class="medium-button share-button-mr mb-10" href='javascript:void(0)'>Share ratings</a>
                    </div>
                    <div id="share-buttons2 hw-accel" style="display: none;">
                        <a class="long-button share-button2 mb-10 mt-10" href='javascript:void(0)'>Share</a>
                    </div>
                </div>
              </div>
            </li>

            <li class="dragend-page">
              <div class="content c-my-rating"  data-prev="my_rating" data-next="my_rating" data-role="page" data-type="myrating" data-dom-cache="true">
                
                <div class="inner-content" style="display:none;">
                  <div class="match-cont hw-accel" style="margin-top: 0;">
                  </div>
                  <div id='my-rating-container' class="player-list mt-15 mrating-swipe hw-accel"></div>
                  <div class="info-box-dd hwaccel" style="display: none;">
                      <div class="ib-dd-top">
                          <span class="arrow-up"></span><h4>Substitutes</h4>
                      </div>
                      <div class="ib-dd-content">
                          <div id="my-rating-container-subs"></div>
                      </div>
                  </div>
                  <div class="info-box-dd last hwaccel" style="display: none;">
                      <div class="ib-dd-top">
                          <span class="arrow-up"></span><h4>Unused Subs</h4>
                      </div>
                      <div class="ib-dd-content">
                          <div id="my-rating-container-unused-subs"></div>
                      </div>
                  </div>
                  <div id="share-container" style="display: none;"><canvas id="share-canvas" width="300" height="480"></canvas></div>
                  <div id="share-buttons" style="display: none;">
                      <a class="medium-button share-button-mr mb-10" href='javascript:void(0)'>Share ratings</a>
                  </div>
                  <div id="share-buttons2 hw-accel" style="display: none;">
                      <a class="long-button share-button2 mb-10 mt-10" href='javascript:void(0)'>Share</a>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>

        <div class="onboard-bottom">
          <div class="dash-divider"></div>
          <a class="text-button" href='dashboard.html'>continue without sharing</a>
        </div>

      </div>
    </div>
  </body>
</html>
